<!DOCTYPE html><html lang=en><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-60112109-3"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','UA-60112109-3');</script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Documentation and customization guides for the Pegasus frontend."><meta name=author content="Mátyás Mustoha"><link rel=canonical href=http://www.pegasus-frontend.org/docs/user-guide/platform-android/ ><link rel="shortcut icon" href=../../img/favicon.ico><title>Android - Pegasus Docs</title><link href=../../css/bootstrap-custom.min.css rel=stylesheet><link href=//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css rel=stylesheet><link rel=stylesheet href=//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css><link href="//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin" rel=stylesheet><link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin" rel=stylesheet><link href="//fonts.googleapis.com/icon?family=Material+Icons" rel=stylesheet><link href=../../css/base.css rel=stylesheet><link href=../../css/cinder.css rel=stylesheet><link rel=stylesheet href=../../css/highlight.css><link href=../../css/extra.css rel=stylesheet><link href=../../css/codehl.css rel=stylesheet><!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]--><script src=https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js></script><script>WebFont.load({google: {families: ['Open Sans', 'PT Sans']}});</script></head><body><div class="navbar navbar-default navbar-fixed-top" role=navigation><div class=container><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=.navbar-collapse><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href=../..>Pegasus Docs</a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav"><li><a href=../..>Home</a></li><li class="dropdown active"><a href=# class=dropdown-toggle data-toggle=dropdown>User Guide <b class=caret></b></a><ul class=dropdown-menu><li><a href=../controls/ >Controls</a></li><li><a href=../config-files/ >Game collections and metadata files</a></li><li><a href=../scripting/ >Scripting</a></li><li class=dropdown-submenu><a tabindex=-1 href="">Platform Notes</a><ul class=dropdown-menu><li class=active><a href=./ >Android</a></li></ul></li></ul></li><li class=dropdown><a href=# class=dropdown-toggle data-toggle=dropdown>Core Dev <b class=caret></b></a><ul class=dropdown-menu><li><a href=../../dev/install-qt/ >Installing Qt</a></li><li><a href=../../dev/cross-compile-qt/ >Cross compile Qt</a></li><li><a href=../../dev/build/ >Building</a></li><li><a href=../../dev/deploy/ >Deployment</a></li><li><a href=../../dev/translate/ >Translations</a></li></ul></li><li class=dropdown><a href=# class=dropdown-toggle data-toggle=dropdown>Theme Dev <b class=caret></b></a><ul class=dropdown-menu><li><a href=../../themes/overview/ >Overview</a></li><li><a href=../../themes/qml-tutorials/ >QML tutorials</a></li><li><a href=../../themes/qml-modules/ >QML modules</a></li><li><a href=../../themes/example-simple/ >Example -- Simple theme</a></li><li><a href=../../themes/example-flixnet/ >Example -- Flixnet theme</a></li><li><a href=../../themes/api/ >API reference</a></li></ul></li></ul><ul class="nav navbar-nav navbar-right"><li><a href=# data-toggle=modal data-target=#mkdocs_search_modal><i class="fa fa-search"></i> Search</a></li><li><a rel=next href=../scripting/ ><i class="fa fa-arrow-left"></i> Previous</a></li><li><a rel=prev href=../../dev/install-qt/ >Next <i class="fa fa-arrow-right"></i></a></li></ul></div></div></div><div class=container><div class=col-md-3><div class="bs-sidebar hidden-print affix well" role=complementary><ul class="nav bs-sidenav"><li class="first-level active"><a href=#platform-notes-android>Platform Notes: Android</a></li><li class=second-level><a href=#directories>Directories</a></li><li class=second-level><a href=#loading-games>Loading games</a></li><li class=third-level><a href=#open-a-file-with-the-default-app>Open a file with the default app</a></li><li class=third-level><a href=#open-a-file-with-a-specific-app>Open a file with a specific app</a></li><li class=third-level><a href=#run-a-custom-command>Run a custom command</a></li><li class=second-level><a href=#app-specific-notes>App-specific notes</a></li><li class=third-level><a href=#retroarch>RetroArch</a></li><li class=third-level><a href=#apps-that-can-open-files>Apps that can open files</a></li><li class=second-level><a href=#additional-notes>Additional notes</a></li></ul></div></div><div class=col-md-9 role=main><h1 id=platform-notes-android>Platform Notes: Android</h1><p>Pegasus is available for Android devices running at least Android 4.1 (Jelly Bean). For proper multimedia support, <strong>Android 4.4 (KitKat)</strong> or newer is recommended.</p><h2 id=directories>Directories</h2><p>Config files are stored under <code>&lt;storage&gt;/pegasus-frontend</code>, where <code>&lt;storage&gt;</code> the internal storage, if you have one, otherwise the SD card. The directory will be created automatically when you first launch Pegasus (or you can create it yourself).</p><p>Then you can continue with creating your <code>game_dirs.txt</code> and other files as usual (<a href=../config-files/ >see here</a>). You'll need to know the absolute path to the storage device -- most file browser apps can tell you this. For example, on my phone it's <code>/storage/emulated/0</code>, but it may differ on yours. A <code>game_dirs.txt</code> would then look like this:</p><div class=codehilite><pre><span></span>/storage/emulated/0/roms/NES
/storage/emulated/0/roms/SNES
/storage/emulated/0/roms/PSP
</pre></div><h2 id=loading-games>Loading games</h2><p>Compared to desktop systems, launching other applications is slightly different on Android. Instead of directly calling a program, you'll need to ask the Activity Manager (<code>am</code>) to open a file or start an app, optionally with additional parameters.</p><p>Here's how it looks in practice:</p><h3 id=open-a-file-with-the-default-app>Open a file with the default app</h3><p>The best case is when you have a file format associated with an app already. To open a file with its default app, invoke the Activity Manager like this:</p><p><code>am start --user 0 -a android.intent.action.VIEW -d &quot;file://&lt;path-to-file&gt;&quot;</code></p><p>Here is an example <code>collections.txt</code> that will open ISO files with the default app:</p><div class=codehilite><pre><span></span><span class=nf>collection</span><span class=o>:</span> <span class=n>PSP</span>
<span class=nf>extension</span><span class=o>:</span> <span class=n>iso</span>
<span class=nf>launch</span><span class=o>:</span> <span class=n>am</span> <span class=n>start</span> --<span class=n>user</span> 0
  -a android.intent.action.VIEW
  -d <span class=s2>&quot;file://{file.path}&quot;</span>
</pre></div><div class="admonition help"><p class=admonition-title>Help</p><ul><li><code>am</code> is the Activity Manager program</li><li>the <code>start</code> command sends an app launching request ("intent") to the Activity Manager</li><li><code>--user 0</code> selects the user (by ID) that sends this request. Without this parameter I've got permission denied errors on my devices.</li><li><code>-a</code> stands for "action"; if an app supports opening files (<code>android.intent.action.VIEW</code> ie. "open with"), it will react to this action. There are other possible actions, like "take a photo" or "call a taxi", but we probably won't need them for our use.</li><li><code>-d</code> is the parameter (data) of the action, and must be in such URI format (<code>file://...</code>)</li></ul><p>The full documentation of <code>am</code> can be found <a href=https://developer.android.com/studio/command-line/adb#am>here</a> and <a href=https://developer.android.com/studio/command-line/adb#IntentSpec>here</a>.</p></div><p>Note that not every app supports opening arbitrary files, or opening files at all (for example, RetroArch). In addition, there seems to be a glich on some systems where a file may get opened with something else when there are multiple apps that can handle the file type. Which leads to...</p><h3 id=open-a-file-with-a-specific-app>Open a file with a specific app</h3><p>Unfortunately opening a file with anything else than the default is a bit painful. To open the file, you have to know the exact name of the app component ("activity") that handles file opening requests. For example, for the Android version of the PPSSPP emulator, this is <code>org.ppsspp.ppsspp/.PpssppActivity</code>.</p><p>I haven't found a good app yet that could tell this about the installed apps, so I guess the best bet for now is either asking the developers for a particular app or looking into its source code (tip: it's always in <code>AndroidManifest.xml</code>). I've also made a small collection which you can find at the <a href=#apps-that-can-open-files>bottom of this page</a>.</p><p>Anyway, once you know the Activity you want to call, the command is</p><p><code>am start --user 0 -a android.intent.action.VIEW -n &lt;activity-name&gt; -d &quot;file://&lt;path-to-file&gt;&quot;</code></p><div class="admonition help"><p class=admonition-title>Help</p><p><code>-n</code> stands for "name"</p></div><p>Here is an example <code>collections.txt</code> that will open ISO files with PPSSPP:</p><div class=codehilite><pre><span></span><span class=nf>collection</span><span class=o>:</span> <span class=n>PSP</span>
<span class=nf>extension</span><span class=o>:</span> <span class=n>iso</span>
<span class=nf>launch</span><span class=o>:</span> <span class=n>am</span> <span class=n>start</span> --<span class=n>user</span> 0
  -a android.intent.action.VIEW
  -n org.ppsspp.ppsspp/.PpssppActivity
  -d <span class=s2>&quot;file://{file.path}&quot;</span>
</pre></div><h3 id=run-a-custom-command>Run a custom command</h3><p>Some apps simply don't support opening files, for example because they rely on a built-in file browser or some other reasons. The way to call these apps may differ from what's described above, or they might need additional parameters. You'll have to ask the developers or look around the source code in this case. See below for some examples.</p><h2 id=app-specific-notes>App-specific notes</h2><h3 id=retroarch>RetroArch</h3><p>RetroArch happens to use a number of custom parameters. It can be launched like this:</p><div class=codehilite><pre><span></span><span class=nf>collection</span><span class=o>:</span> <span class=n>NES</span>
<span class=nf>extensions</span><span class=o>:</span> <span class=n>zip</span>
<span class=nf>launch</span><span class=o>:</span> <span class=n>am</span> <span class=n>start</span> --<span class=n>user</span> 0
  -n com.retroarch/.browser.retroactivity.RetroActivityFuture
  -e ROM <span class=s2>&quot;{file.path}&quot;</span>
  -e LIBRETRO /data/data/com.retroarch/cores/fceumm_libretro_android.so
  -e CONFIGFILE /storage/emulated/0/Android/data/com.retroarch/files/retroarch.cfg
  -e IME com.android.inputmethod.latin/.LatinIME
  -e DATADIR /data/data/com.retroarch
  -e APK /data/app/com.retroarch-1/base.apk
  -e SDCARD /storage/emulated/0
  -e DOWNLOADS /storage/emulated/0/Download
  -e SCREENSHOTS /storage/emulated/0/Pictures
  -e EXTERNAL /storage/emulated/0/Android/data/com.retroarch/files
  --activity-clear-top
</pre></div><p>(based on the source code of their Android port at the time of writing).</p><p>The important parts here are the <strong>core</strong> and the <strong>storage</strong> paths. Make sure you <strong>correct the paths</strong> of the above example to match your system and collection:</p><ul><li><code>/storage/emulated/0</code> is the absolute path to the internal storage on my phone. This can be completely different on other devices (eg. <code>/storage/sdcard</code>). Most file browser apps can tell you the correct path, then you can replace all occurences above.</li><li><code>/data/data/com.retroarch/cores/fceumm_libretro_android.so</code> is the libretro core I've installed using the RetroArch menu. You'll only need to change the <code>fceumm_libretro_android.so</code> part. You can find the available cores <a href=http://buildbot.libretro.com/nightly/android/latest/armeabi-v7a/ >here</a>.</li></ul><div class="admonition help"><p class=admonition-title>Help</p><p><code>-e KEY VALUE</code> defines an extra parameter, specific to the app. Unlike the file opening before, RetroArch does not need <code>file://</code> for the ROM path.</p></div><h3 id=apps-that-can-open-files>Apps that can open files</h3><p>Here's an incomplete list of emulators that can open external files using <code>android.intent.action.VIEW</code>. If you think some some of the entries are incorrect, or you'd like to extend this list, feel free to open an Issue <a href=https://github.com/mmatyas/pegasus-frontend/issues>here</a>.</p><table><thead><tr><th align=left>App name</th><th align=left>Activity</th></tr></thead><tbody><tr><td align=left>2600.emu</td><td align=left><code>com.explusalpha.A2600Emu/com.imagine.BaseActivity</code></td></tr><tr><td align=left>C54.emu</td><td align=left><code>com.explusalpha.C64Emu/com.imagine.BaseActivity</code></td></tr><tr><td align=left>ClassicBoy</td><td align=left><code>com.portableandroid.classicboyLite/com.portableandroid.classicboy.EntryActivity</code></td></tr><tr><td align=left>DraStic</td><td align=left><code>com.dsemu.drastic/.DraSticActivity</code></td></tr><tr><td align=left>Emulator for NES/SNES - Arcade Classic Games</td><td align=left>no support</td></tr><tr><td align=left>ePSXe</td><td align=left><code>com.epsxe.ePSXe/com.dropbox.client2.android.AuthActivity</code></td></tr><tr><td align=left>GBA.emu</td><td align=left><code>com.explusalpha.GbaEmu/com.imagine.BaseActivity</code></td></tr><tr><td align=left>GBC.emu</td><td align=left><code>com.explusalpha.GbcEmu/com.imagine.BaseActivity</code></td></tr><tr><td align=left>John emulators</td><td align=left>no support</td></tr><tr><td align=left>MD.emu</td><td align=left><code>com.explusalpha.MdEmu/com.imagine.BaseActivity</code></td></tr><tr><td align=left>MegaN64</td><td align=left>no support</td></tr><tr><td align=left>MSX.emu</td><td align=left><code>com.explusalpha.MsxEmu/com.imagine.BaseActivity</code></td></tr><tr><td align=left>Mupen64 Plus AE</td><td align=left><code>paulscode.android.mupen64plusae/.MainActivity</code></td></tr><tr><td align=left>Neo.emu</td><td align=left><code>com.explusalpha.NeoEmu/com.imagine.BaseActivity</code></td></tr><tr><td align=left>NES.emu</td><td align=left><code>com.explusalpha.NesEmu/com.imagine.BaseActivity</code></td></tr><tr><td align=left>NGP.emu</td><td align=left><code>com.explusalpha.NgpEmu/com.imagine.BaseActivity</code></td></tr><tr><td align=left>Nostalgia.NES</td><td align=left><code>com.nostalgiaemulators.neslite/com.nostalgiaemulators.nes.NesSlotImportActivity</code></td></tr><tr><td align=left>PPSSPP</td><td align=left><code>org.ppsspp.ppsspp/.PpssppActivity</code></td></tr><tr><td align=left>Reicast</td><td align=left><code>com.reicast.emulator/.MainActivity</code></td></tr><tr><td align=left>Snes9xPlus</td><td align=left><code>com.explusalpha.Snes9xPlus/com.imagine.BaseActivity</code></td></tr><tr><td align=left>SuperRetro16</td><td align=left><code>com.bubblezapgames.supergnes/.IntentFilterActivity</code></td></tr><tr><td align=left>SuperRetro16 Lite</td><td align=left><code>com.bubblezapgames.supergnes_lite/com.bubblezapgames.supergnes.IntentFilterActivity</code></td></tr></tbody></table><h2 id=additional-notes>Additional notes</h2><ul><li>Video playback has a high battery drain</li><li>Unmounting the SD card while Pegasus is running may force close it</li><li>If you're launching a memory-intensive application, the Android OS may decide to close Pegasus</li><li>Shutdown and reboot is not avaliable due to Android restrictions</li></ul></div></div><footer class="col-md-12 text-center"><hr><p><small>Copyright &copy; 2018 Mátyás Mustoha<br></small><small>Documentation built with <a href=http://www.mkdocs.org/ >MkDocs</a>.</small></p></footer><script src=../../js/jquery-1.10.2.min.js></script><script src=../../js/bootstrap-3.0.3.min.js></script><script src=../../js/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script><script>var base_url = '../..';</script><script data-main=../../mkdocs/js/search.js src=../../mkdocs/js/require.js></script><script src=../../js/base.js></script><script src=../../search/require.js></script><script src=../../search/search.js></script><div class=modal id=mkdocs_search_modal tabindex=-1 role=dialog aria-labelledby="Search Modal" aria-hidden=true><div class=modal-dialog><div class=modal-content><div class=modal-header><button type=button class=close data-dismiss=modal><span aria-hidden=true>&times;</span> <span class=sr-only>Close</span></button><h4 class=modal-title id=exampleModalLabel>Search</h4></div><div class=modal-body><p>From here you can search these documents. Enter your search terms below.</p><form role=form><div class=form-group><input class=form-control placeholder=Search... id=mkdocs-search-query></div></form><div id=mkdocs-search-results></div></div><div class=modal-footer></div></div></div></div></body></html>