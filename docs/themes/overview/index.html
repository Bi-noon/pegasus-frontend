<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-60112109-3"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-60112109-3');
    </script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">   
    <link rel="shortcut icon" href="../../img/favicon.ico">

    <title></title>

    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/icon?family=Material+Icons' rel='stylesheet' type='text/css'>
    <link href="../../css/base.css" rel="stylesheet">
    <link href="../../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">


    <link href="../../css/extra.css" rel="stylesheet">


    <link href="../../css/codehl.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            <a class="navbar-brand" href="../..">Pegasus Docs</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../user-guide/controls/">Controls</a>
</li>

                        
                            
<li >
    <a href="../../user-guide/scripting/">Scripting</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Core Dev <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../dev/install-qt/">Installing Qt</a>
</li>

                        
                            
<li >
    <a href="../../dev/cross-compile-qt/">Cross compile Qt</a>
</li>

                        
                            
<li >
    <a href="../../dev/build/">Building</a>
</li>

                        
                            
<li >
    <a href="../../dev/deploy/">Deployment</a>
</li>

                        
                            
<li >
    <a href="../../dev/translate/">Translations</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Theme Dev <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li class="active">
    <a href="./">Overview</a>
</li>

                        
                            
<li >
    <a href="../qml-tutorials/">QML tutorials</a>
</li>

                        
                            
<li >
    <a href="../example-simple/">Example -- Simple theme</a>
</li>

                        
                            
<li >
    <a href="../example-flixnet/">Example -- Flixnet theme</a>
</li>

                        
                            
<li >
    <a href="../api/">API reference</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fa fa-search"></i> Search
                        </a>
                    </li>
                    <li >
                        <a rel="next" href="../../dev/translate/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../qml-tutorials/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/mmatyas/pegasus-frontend/edit/master/docs/themes/overview.md"><i class="fa fa-github"></i> Edit on GitHub</a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#theme-guide">Theme guide</a></li>
            <li class="second-level"><a href="#overview">Overview</a></li>
                
            <li class="second-level"><a href="#qml">QML</a></li>
                
                <li class="third-level"><a href="#extending-with-javascript">Extending with JavaScript</a></li>
            <li class="second-level"><a href="#theme-directories">Theme directories</a></li>
                
            <li class="second-level"><a href="#theme-structure">Theme structure</a></li>
                
                <li class="third-level"><a href="#themecfg">theme.cfg</a></li>
                <li class="third-level"><a href="#themeqml">theme.qml</a></li>
                <li class="third-level"><a href="#usage">Usage</a></li>
            <li class="second-level"><a href="#special-qml-properties">Special QML properties</a></li>
                
                <li class="third-level"><a href="#virtual-screen-coordinates">Virtual screen coordinates</a></li>
                <li class="third-level"><a href="#game-data">Game data</a></li>
            <li class="second-level"><a href="#next-steps">Next steps</a></li>
                
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="theme-guide">Theme guide</h1>
<h2 id="overview">Overview</h2>
<p>Pegasus consists of two layers: the <strong>core</strong> which looks for your games and metadata, and the <strong>user interface</strong> (UI), where the data provided by the core can be presented in some form. The two layers are completely separated, which means you have full control about what you put on the screen, where you place assets or text and what kind of animations or effects you use on them.</p>
<p><img alt="program structure" src="../img/structure.png" /></p>
<p>Themes in Pegasus define the look and feel of the whole "content area". Themes don't have predefined "screens" or fixed layouts, though you can implement them if you want. The goal is to give theme makers all the available tools and components and allow them creating interfaces without further restrictions.</p>
<h2 id="qml">QML</h2>
<p>Themes are written in the <strong>QML</strong> language. QML (Qt Modeling Language) is a user interface specification language: it describes the components of the theme, their properties, and the hierarchy and relations between them. Technically it's similar to XML, HTML/CSS and the JSON languages.</p>
<div class="codehilite"><pre><span></span><span class="c1">// An example QML document</span>
<span class="c1">// *QML documents describe an object tree of elements*</span>
<span class="c1">// Source: https://en.wikipedia.org/wiki/QML</span>

<span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.0</span>

<span class="nx">Rectangle</span> <span class="p">{</span>
    <span class="kd">id: canvas</span>
    <span class="k">width:</span> <span class="mi">250</span>
    <span class="k">height:</span> <span class="mi">200</span>
    <span class="k">color:</span> <span class="s2">&quot;blue&quot;</span>

    <span class="nx">Image</span> <span class="p">{</span>
        <span class="kd">id: logo</span>
        <span class="k">source:</span> <span class="s2">&quot;pics/logo.png&quot;</span>
        <span class="k">anchors.centerIn:</span> <span class="nx">parent</span>
        <span class="k">x:</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span> <span class="o">/</span> <span class="mi">5</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>There are numerous built-in components you can use in a theme: simple types (texts, rectangles, images, ...), components that define layouts of other items (rows, grids, custom paths) and special elements (animations, particle effects, timers). These are contained in so called <em>modules</em>, with most of them are in the one called <strong>Qt Quick</strong>.</p>
<p>For learning QML, you can find resources on the <a href="../qml-tutorials/">QML tutorials page</a>.</p>
<h3 id="extending-with-javascript">Extending with JavaScript</h3>
<p>QML generally describes <em>what</em> is on the screen and how they <em>look</em> like -- to tell what a component should <em>do</em>, you can extend QML with <strong>JavaScript</strong> code. Don't worry if you aren't familiar with it; QML works quite well on its own, usually you only need to code if you want to implement some special behaviour for the elements.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>While JavaScript is usually associated with websites, Pegasus is <strong>NOT</strong> a web browser or an HTML5 app. Only the JavaScript engine is used, not a whole browser. In addition, your code is compiled and cached automatically for better performance.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Further reading</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/QML">https://en.wikipedia.org/wiki/QML</a></li>
<li><a href="https://doc.qt.io/qt-5/qtquick-index.html">https://doc.qt.io/qt-5/qtquick-index.html</a></li>
<li><a href="https://doc.qt.io/qt-5/qmlapplications.html">https://doc.qt.io/qt-5/qmlapplications.html</a></li>
</ul>
</div>
<h2 id="theme-directories">Theme directories</h2>
<p>Pegasus is looking for themes in the following directories:</p>
<p><strong>All platforms:</strong></p>
<ul>
<li><code>[directory of the program]/themes</code></li>
<li><code>[INSTALL_DATADIR]/themes</code> (only if defined during a <a href="../../dev/build/">manual build</a>)</li>
</ul>
<p><strong>Linux:</strong></p>
<ul>
<li><code>~/.config/pegasus-frontend/themes</code></li>
<li><code>~/.local/share/pegasus-frontend/themes</code></li>
<li><code>/etc/xdg/pegasus-frontend/themes</code></li>
<li><code>/usr/local/share/pegasus-frontend/themes</code></li>
<li><code>/usr/share/pegasus-frontend/themes</code></li>
</ul>
<p><strong>Windows:</strong></p>
<ul>
<li><code>C:/Users/[user name]/AppData/Local/pegasus-frontend/themes</code></li>
<li><code>C:/ProgramData/pegasus-frontend/themes</code></li>
</ul>
<p><strong>macOS:</strong></p>
<ul>
<li><code>~/Library/Preferences/pegasus-frontend/themes</code></li>
<li><code>~/Library/Application Support/pegasus-frontend/themes</code></li>
<li><code>/Library/Application Support/pegasus-frontend/themes</code></li>
</ul>
<h2 id="theme-structure">Theme structure</h2>
<p>Inside these directories, every individual theme is contained in its own directory. The name of this directory doesn't matter, as long as it's unique.</p>
<p>Two files are required for every theme: a <strong>theme.cfg</strong> file that contains information about your theme, like name or description, and a <strong>theme.qml</strong> which will be the entry point to your QML code (ie. this will be loaded first by Pegasus).</p>
<h3 id="themecfg">theme.cfg</h3>
<p>The <code>theme.cfg</code> file is used to describe your theme. It's a simple configuration file, in the same format as Pegasus' game metadata files (<em>todo</em>). In short:</p>
<ul>
<li><code>option name: option value</code> defines options</li>
<li><code>[words between brackets]</code> defines groups of options</li>
<li>empty lines and lines starting with <code>#</code> (comments) are skipped</li>
<li>lines starting with space will be appended to the previous option's value (which you can use for eg. descriptions spanning multiple lines)</li>
</ul>
<p>Here is an example:</p>
<div class="codehilite"><pre><span></span><span class="k">name</span><span class="w">: </span><span class="s">Pegasus Grid</span>
<span class="k">author</span><span class="w">: </span><span class="s">Mátyás Mustoha</span>
<span class="k">version</span><span class="w">: </span><span class="s">alpha</span>
<span class="k">summary</span><span class="w">: </span><span class="s">The default grid theme of Pegasus</span>
</pre></div>


<p>Currently the following options are recognized:</p>
<ul>
<li><code>name</code>: the name of your theme (required). Should be short and unique.</li>
<li><code>version</code>: a version identifier; can be a number, text, whatever you like as long as it's unique.</li>
<li><code>author</code>: the author of the theme; either simply a name or in "name &lt;email&gt;" format.</li>
<li><code>summary</code>: a short (max. 80-100 characters) summary.</li>
<li><code>description</code>: a longer description.</li>
<li><code>keywords</code>: keywords used for searching. Separate them with '<code>,</code>'.</li>
<li><code>homepage</code>: a link to you project's site.</li>
</ul>
<p>Every theme is required to have a <code>theme.cfg</code> file, with at least the <code>name</code> defined.</p>
<h3 id="themeqml">theme.qml</h3>
<p>The <code>theme.qml</code> file is the entry point of your theme. You should start with the following minimal code:</p>
<div class="codehilite"><pre><span></span><span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.0</span>

<span class="nx">FocusScope</span> <span class="p">{</span>

    <span class="c1">// your code here</span>

<span class="p">}</span>
</pre></div>


<p><code>FocusScope</code> is a special container component in QML which is used for separating keyboard/gamepad input from the other parts of the UI (eg. main menu). <code>FocusScope</code>, as well as the other components and modules will be introduced in the more in-depth <a href="../qml-tutorials/">QML tutorials</a>.</p>
<details class="tip"><summary>Hello World!</summary><p>Here's a simple "Hello World" test theme:</p><div class="codehilite"><pre><span></span><span class="kr">import</span> <span class="nx">QtQuick</span> <span class="mf">2.0</span>

<span class="nx">FocusScope</span> <span class="p">{</span>

    <span class="nx">Text</span> <span class="p">{</span>
        <span class="k">text:</span> <span class="s2">&quot;Hello World!&quot;</span>
        <span class="k">color:</span> <span class="s2">&quot;white&quot;</span>
        <span class="k">anchors.centerIn:</span> <span class="nx">parent</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>

</details><h3 id="usage">Usage</h3>
<p>If you've created the <code>theme.cfg</code> and <code>theme.qml</code> files as described above, you should now see your entry in the list of available themes in Pegasus' settings menu.</p>
<p>After the theme is loaded, pressing the <span class="keys"><kbd class="key-f5">F5</kbd></span> key will make Pegasus reload its files, making it easier to try out changes.</p>
<h2 id="special-qml-properties">Special QML properties</h2>
<p>Pegasus' themes are standard QML files, and you can use any QML tutorial (collection <a href="../qml-tutorials/">here</a>) to learn it. Pegasus itself provides the following additions:</p>
<ul>
<li>a virtual coordinate system to make multiple aspect ratio support easier</li>
<li>the actual collection- and platform data, and the way to select and launch a game</li>
</ul>
<h3 id="virtual-screen-coordinates">Virtual screen coordinates</h3>
<p>When you load a theme, its main component (the <code>FocusScope</code> above) will be set to fill the whole screen. The top left corner of the screen is (0,0), with the X axis growing right and the Y axis growing downwards.</p>
<p>While positioning elements on the screen, you should make sure that your theme works well with multiple aspect ratios and screen resolutions. Generally in QML this isn't hard because you can tell the position and size of elements compared to others using <em>anchors</em> (eg. align an element right above or below to another -- see the <a href="../qml-tutorials/">QML tutorials</a>).</p>
<p>When you <em>do</em> have to position or size things manually, it is common to use percentages or create different themes for different aspect ratios. For better support of different screen sizes, Pegasus also provides an optional <strong>virtual coordinate system</strong>. You can treat the screen as one with the resolution of <em>at least</em> <strong>1280x720</strong> virtual pixels (16:9 aspect ratio), and use integer pixel values, which will then scale to the correct physical value according to the screen's real resolution.</p>
<p><img alt="vpx" src="../img/overview_vpx.png" /></p>
<p>If the screen's aspect ratio is smaller than 16:9 (eg. 4:3 or 5:4), then the <em>virtual</em> screen will be taller than 720 virtual pixels, but still have 1280 as a fixed width. If the aspect ratio is wider (eg. 21:9), then the virtual height will remain to be 720, but the width will be bigger.</p>
<p>This system can be useful when you want to express precise details as integer values, like spacing, text sizes, width/height, etc. To use virtual pixel values, simply put your number inside a function called <code>vpx</code>. For example, instead of</p>
<div class="codehilite"><pre><span></span><span class="k">width:</span> <span class="mi">50</span>
</pre></div>


<p>you would use</p>
<div class="codehilite"><pre><span></span><span class="k">width:</span> <span class="nx">vpx</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
</pre></div>


<p>which will turn into 50 real pixels on a 720p screen, scale up to 150px on a 4K TV, and scale down to 25px on a smaller 360p device.</p>
<p>Using virtual pixel values is optional, but often more intuitive than percentages with several digits of precision. Depending on your situations, you might prefer one over the other, or use both of them. Feel free to experiment!</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Using the virtual coordinate system does <strong>not</strong> decrease image quality.</p>
</div>
<h3 id="game-data">Game data</h3>
<p>The actual data set provided by the Core is available in the global object <code>api</code>. Its items are detailed on the <a href="../api/">API reference page</a>.</p>
<h2 id="next-steps">Next steps</h2>
<ul>
<li><a href="../qml-tutorials/">QML tutorial collection</a></li>
<li><a href="../example-simple/">Step-by-step example: Simple theme</a></li>
<li><a href="../example-flixnet/">Step-by-step example: Flixnet theme</a></li>
</ul></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
    </footer>

    <script src="../../js/jquery-1.10.2.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '../..';
    </script>
    <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
    <script src="../../js/base.js"></script>
    <script src="../../search/require.js"></script>
    <script src="../../search/search.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
